# Generated by go2rpm 1.9.0
%bcond_without check
%global debug_package %{nil}

# Avoid noarch package built differently on different architectures
%global __requires_exclude %{?__requires_exclude:%{__requires_exclude}|}^golang\\(github.com/ncruces/go-strftime\\)$|^golang\\(github.com/mattn/go-isatty\\)$

# https://gitlab.com/cznic/libc
%global goipath         modernc.org/libc
%global forgeurl        https://gitlab.com/cznic/libc
Version:                1.51.0
%global tag             v%{version}

%gometa -f

%global common_description %{expand:
C-runtime services for Go without cgo.}

%global golicenses      LICENSE LICENSE-GO LICENSE-honnef\\\
                        COPYRIGHT-MUSL
%global godocs          AUTHORS CONTRIBUTORS README.md

Name:           %{goname}
Release:        %autorelease
Summary:        C-runtime services for Go without cgo

# BSD-3-Clause: main program
# MIT: musl/ and honnef.co/
License:        BSD-3-Clause AND MIT
URL:            %{gourl}
Source:         %{gosource}
Patch0:         libc-v1.51.0-drop-invisible-char.patch

%description %{common_description}

%gopkg

%prep
%goprep
%autopatch -p1
rm -rfv v2/
mv honnef.co/go/netdb/LICENSE LICENSE-honnef

#generate_buildrequires
#go_generate_buildrequires

%install
%gopkginstall

# Disable test due to https://gitlab.com/cznic/libc/-/issues/39.
%if %{with check}
%check
%gocheck -d .
%endif

%files
%license LICENSE LICENSE-GO LICENSE-honnef COPYRIGHT-MUSL
%doc AUTHORS CONTRIBUTORS README.md

%gopkgfiles

%changelog
%autochangelog
