# Generated by go2rpm 1
%bcond_without check

%global debug_package %{nil}

# https://github.com/Azure/azure-amqp-common-go
%global goipath         github.com/Azure/azure-amqp-common-go
Version:                4.2.0

%gometa

%global goaltipaths     github.com/Azure/azure-amqp-common-go/v3

%global common_description %{expand:
Azure AMQP abstractions for Golang contains common types and interfaces for use
in Service Bus and Event Hubs.

This project contains reusable components for AMQP based services like Event Hub
and Service Bus. You will find abstractions over authentication, claims-based
security, connection string parsing and RPC for AMQP.}

%global golicenses      LICENSE
%global godocs          README.md changelog.md

Name:           %{goname}
Release:        %autorelease
Summary:        Common types and interfaces for Service Bus and Event Hubs

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}
# Fix build on Go 1.24.
# Submitted upstream as https://github.com/Azure/azure-amqp-common-go/pull/76
Patch0001:      0001-Fix-build-with-Go-1.24.patch

BuildRequires:  golang(github.com/Azure/go-amqp)
BuildRequires:  golang(github.com/Azure/go-autorest/autorest/adal)
BuildRequires:  golang(github.com/Azure/go-autorest/autorest/azure)
BuildRequires:  golang(github.com/devigned/tab)
BuildRequires:  golang(golang.org/x/crypto/pkcs12)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/stretchr/testify/assert)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
%autopatch -p1

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
%autochangelog
