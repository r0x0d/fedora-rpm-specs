# Generated by rust2rpm 26
%bcond_without check
%global debug_package %{nil}

%global crate tower-http

Name:           rust-tower-http
Version:        0.5.2
Release:        %autorelease
Summary:        Tower middleware and utilities for HTTP clients and servers

License:        MIT
URL:            https://crates.io/crates/tower-http
Source:         %{crates_source}
# Manually created patch for downstream crate metadata changes
# * relax sync_wrapper dev-dependency from ^0.1.1 to >=0.1.1,<2
# * Upgrade base64 and brotli
#   (https://github.com/tower-rs/tower-http/commit/24b6b730810df8950cb89854f8a4571eb8804587)
Patch:          tower-http-fix-metadata.diff
# * Downstream-only: adjust README.md paths for testing published crates
# * The original paths are correct for testing in a checked-out git repository
Patch10:       0001-Downstream-only-adjust-README.md-paths-for-testing-p.patch

BuildRequires:  cargo-rpm-macros >= 24

%global _description %{expand:
Tower middleware and utilities for HTTP clients and servers.}

%description %{_description}

%package        devel
Summary:        %{summary}
BuildArch:      noarch

%description    devel %{_description}

This package contains library source intended for building other packages which
use the "%{crate}" crate.

%files          devel
%license %{crate_instdir}/LICENSE
%doc %{crate_instdir}/CHANGELOG.md
%doc %{crate_instdir}/README.md
%{crate_instdir}/

%package     -n %{name}+default-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+default-devel %{_description}

This package contains library source intended for building other packages which
use the "default" feature of the "%{crate}" crate.

%files       -n %{name}+default-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+add-extension-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+add-extension-devel %{_description}

This package contains library source intended for building other packages which
use the "add-extension" feature of the "%{crate}" crate.

%files       -n %{name}+add-extension-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-compression-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-compression-devel %{_description}

This package contains library source intended for building other packages which
use the "async-compression" feature of the "%{crate}" crate.

%files       -n %{name}+async-compression-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+auth-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+auth-devel %{_description}

This package contains library source intended for building other packages which
use the "auth" feature of the "%{crate}" crate.

%files       -n %{name}+auth-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+base64-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+base64-devel %{_description}

This package contains library source intended for building other packages which
use the "base64" feature of the "%{crate}" crate.

%files       -n %{name}+base64-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+catch-panic-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+catch-panic-devel %{_description}

This package contains library source intended for building other packages which
use the "catch-panic" feature of the "%{crate}" crate.

%files       -n %{name}+catch-panic-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+compression-br-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+compression-br-devel %{_description}

This package contains library source intended for building other packages which
use the "compression-br" feature of the "%{crate}" crate.

%files       -n %{name}+compression-br-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+compression-deflate-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+compression-deflate-devel %{_description}

This package contains library source intended for building other packages which
use the "compression-deflate" feature of the "%{crate}" crate.

%files       -n %{name}+compression-deflate-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+compression-full-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+compression-full-devel %{_description}

This package contains library source intended for building other packages which
use the "compression-full" feature of the "%{crate}" crate.

%files       -n %{name}+compression-full-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+compression-gzip-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+compression-gzip-devel %{_description}

This package contains library source intended for building other packages which
use the "compression-gzip" feature of the "%{crate}" crate.

%files       -n %{name}+compression-gzip-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+compression-zstd-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+compression-zstd-devel %{_description}

This package contains library source intended for building other packages which
use the "compression-zstd" feature of the "%{crate}" crate.

%files       -n %{name}+compression-zstd-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+cors-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+cors-devel %{_description}

This package contains library source intended for building other packages which
use the "cors" feature of the "%{crate}" crate.

%files       -n %{name}+cors-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+decompression-br-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+decompression-br-devel %{_description}

This package contains library source intended for building other packages which
use the "decompression-br" feature of the "%{crate}" crate.

%files       -n %{name}+decompression-br-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+decompression-deflate-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+decompression-deflate-devel %{_description}

This package contains library source intended for building other packages which
use the "decompression-deflate" feature of the "%{crate}" crate.

%files       -n %{name}+decompression-deflate-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+decompression-full-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+decompression-full-devel %{_description}

This package contains library source intended for building other packages which
use the "decompression-full" feature of the "%{crate}" crate.

%files       -n %{name}+decompression-full-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+decompression-gzip-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+decompression-gzip-devel %{_description}

This package contains library source intended for building other packages which
use the "decompression-gzip" feature of the "%{crate}" crate.

%files       -n %{name}+decompression-gzip-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+decompression-zstd-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+decompression-zstd-devel %{_description}

This package contains library source intended for building other packages which
use the "decompression-zstd" feature of the "%{crate}" crate.

%files       -n %{name}+decompression-zstd-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+follow-redirect-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+follow-redirect-devel %{_description}

This package contains library source intended for building other packages which
use the "follow-redirect" feature of the "%{crate}" crate.

%files       -n %{name}+follow-redirect-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+fs-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+fs-devel %{_description}

This package contains library source intended for building other packages which
use the "fs" feature of the "%{crate}" crate.

%files       -n %{name}+fs-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+full-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+full-devel %{_description}

This package contains library source intended for building other packages which
use the "full" feature of the "%{crate}" crate.

%files       -n %{name}+full-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+futures-core-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+futures-core-devel %{_description}

This package contains library source intended for building other packages which
use the "futures-core" feature of the "%{crate}" crate.

%files       -n %{name}+futures-core-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+futures-util-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+futures-util-devel %{_description}

This package contains library source intended for building other packages which
use the "futures-util" feature of the "%{crate}" crate.

%files       -n %{name}+futures-util-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+httpdate-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+httpdate-devel %{_description}

This package contains library source intended for building other packages which
use the "httpdate" feature of the "%{crate}" crate.

%files       -n %{name}+httpdate-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+iri-string-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+iri-string-devel %{_description}

This package contains library source intended for building other packages which
use the "iri-string" feature of the "%{crate}" crate.

%files       -n %{name}+iri-string-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+limit-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+limit-devel %{_description}

This package contains library source intended for building other packages which
use the "limit" feature of the "%{crate}" crate.

%files       -n %{name}+limit-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+map-request-body-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+map-request-body-devel %{_description}

This package contains library source intended for building other packages which
use the "map-request-body" feature of the "%{crate}" crate.

%files       -n %{name}+map-request-body-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+map-response-body-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+map-response-body-devel %{_description}

This package contains library source intended for building other packages which
use the "map-response-body" feature of the "%{crate}" crate.

%files       -n %{name}+map-response-body-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+metrics-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+metrics-devel %{_description}

This package contains library source intended for building other packages which
use the "metrics" feature of the "%{crate}" crate.

%files       -n %{name}+metrics-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+mime-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+mime-devel %{_description}

This package contains library source intended for building other packages which
use the "mime" feature of the "%{crate}" crate.

%files       -n %{name}+mime-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+mime_guess-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+mime_guess-devel %{_description}

This package contains library source intended for building other packages which
use the "mime_guess" feature of the "%{crate}" crate.

%files       -n %{name}+mime_guess-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+normalize-path-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+normalize-path-devel %{_description}

This package contains library source intended for building other packages which
use the "normalize-path" feature of the "%{crate}" crate.

%files       -n %{name}+normalize-path-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+percent-encoding-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+percent-encoding-devel %{_description}

This package contains library source intended for building other packages which
use the "percent-encoding" feature of the "%{crate}" crate.

%files       -n %{name}+percent-encoding-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+propagate-header-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+propagate-header-devel %{_description}

This package contains library source intended for building other packages which
use the "propagate-header" feature of the "%{crate}" crate.

%files       -n %{name}+propagate-header-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+redirect-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+redirect-devel %{_description}

This package contains library source intended for building other packages which
use the "redirect" feature of the "%{crate}" crate.

%files       -n %{name}+redirect-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+request-id-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+request-id-devel %{_description}

This package contains library source intended for building other packages which
use the "request-id" feature of the "%{crate}" crate.

%files       -n %{name}+request-id-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+sensitive-headers-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+sensitive-headers-devel %{_description}

This package contains library source intended for building other packages which
use the "sensitive-headers" feature of the "%{crate}" crate.

%files       -n %{name}+sensitive-headers-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+set-header-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+set-header-devel %{_description}

This package contains library source intended for building other packages which
use the "set-header" feature of the "%{crate}" crate.

%files       -n %{name}+set-header-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+set-status-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+set-status-devel %{_description}

This package contains library source intended for building other packages which
use the "set-status" feature of the "%{crate}" crate.

%files       -n %{name}+set-status-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+timeout-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+timeout-devel %{_description}

This package contains library source intended for building other packages which
use the "timeout" feature of the "%{crate}" crate.

%files       -n %{name}+timeout-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-util-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-util-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-util" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-util-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tower-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tower-devel %{_description}

This package contains library source intended for building other packages which
use the "tower" feature of the "%{crate}" crate.

%files       -n %{name}+tower-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+trace-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+trace-devel %{_description}

This package contains library source intended for building other packages which
use the "trace" feature of the "%{crate}" crate.

%files       -n %{name}+trace-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tracing-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tracing-devel %{_description}

This package contains library source intended for building other packages which
use the "tracing" feature of the "%{crate}" crate.

%files       -n %{name}+tracing-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+util-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+util-devel %{_description}

This package contains library source intended for building other packages which
use the "util" feature of the "%{crate}" crate.

%files       -n %{name}+util-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+uuid-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+uuid-devel %{_description}

This package contains library source intended for building other packages which
use the "uuid" feature of the "%{crate}" crate.

%files       -n %{name}+uuid-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+validate-request-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+validate-request-devel %{_description}

This package contains library source intended for building other packages which
use the "validate-request" feature of the "%{crate}" crate.

%files       -n %{name}+validate-request-devel
%ghost %{crate_instdir}/Cargo.toml

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires -f full

%build
%cargo_build -f full

%install
%cargo_install -f full

%if %{with check}
%check
# * Almost all of the serve_dir/serve_file tests fail in the released crate
#   because they need ../test-files from the git repository or rely on the
#   structure of the git repository (as opposed to that of the published crate).
#   Skip these tests rather than going to extremes to make them work.
%cargo_test -f full -- -- --skip services::fs::serve_dir:: --skip services::fs::serve_file::
%endif

%changelog
%autochangelog
