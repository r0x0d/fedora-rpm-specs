# Generated by rust2rpm 26
# * test fixtures are not included in published crates
%bcond_with check
%global debug_package %{nil}

%global crate librsvg

Name:           rust-librsvg
Version:        2.59.2
Release:        %autorelease
Summary:        Library to render SVG images to Cairo surfaces

License:        LGPL-2.1-or-later
URL:            https://crates.io/crates/librsvg
Source:         %{crates_source}
# Manually created patch for downstream crate metadata changes
# * bump markup5ever dependency from 0.12 to 0.14
# * bump xml5ever dependency from 0.18 to 0.20
Patch:          librsvg-fix-metadata.diff
Patch:          0001-port-to-markup5ever-0.14-and-xml5ever-0.20.patch

BuildRequires:  cargo-rpm-macros >= 24

%global _description %{expand:
A library to render SVG images to Cairo surfaces. GNOME uses this to
render SVG icons. Outside of GNOME, other desktop environments use it
for similar purposes. Wikimedia uses it for Wikipedia's SVG diagrams.}

%description %{_description}

%package        devel
Summary:        %{summary}
BuildArch:      noarch

%description    devel %{_description}

This package contains library source intended for building other packages which
use the "%{crate}" crate.

%files          devel
%license %{crate_instdir}/COPYING.LIB
%doc %{crate_instdir}/README.md
%{crate_instdir}/

%package     -n %{name}+default-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+default-devel %{_description}

This package contains library source intended for building other packages which
use the "default" feature of the "%{crate}" crate.

%files       -n %{name}+default-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+capi-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+capi-devel %{_description}

This package contains library source intended for building other packages which
use the "capi" feature of the "%{crate}" crate.

%files       -n %{name}+capi-devel
%ghost %{crate_instdir}/Cargo.toml

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build

%install
%cargo_install

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
