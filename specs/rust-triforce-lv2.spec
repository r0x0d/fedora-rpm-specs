# Generated by rust2rpm 27
%bcond check 1

%global crate triforce-lv2

Name:           rust-triforce-lv2
Version:        0.1.1
Release:        %autorelease
Summary:        Minimum variance distortionless response beamformer for Apple mic arrays

License:        GPL-2.0-or-later
URL:            https://crates.io/crates/triforce-lv2
Source:         %{crates_source}

BuildRequires:  cargo-rpm-macros >= 24
BuildRequires:  make

# Not supported by rust-lv2
ExcludeArch:    ppc64le s390x

%global _description %{expand:
Minimum variance distortionless response beamformer for Apple mic
arrays.}

%description %{_description}

%package     -n lv2-triforce
Summary:        %{summary}
# Apache-2.0
# GPL-2.0-or-later
# MIT
# MIT OR Apache-2.0
# Zlib OR Apache-2.0 OR MIT
License:        Apache-2.0 AND GPL-2.0-or-later AND MIT AND (MIT OR Apache-2.0) AND (Zlib OR Apache-2.0 OR MIT)
# LICENSE.dependencies contains a full license breakdown
Requires:       lv2
# Drop after f42 is EOL
Provides:       %{crate} = %{version}-%{release}
Provides:       %{crate}%{?_isa} = %{version}-%{release}
Obsoletes:      %{crate} < 0.1.1-2

%description -n lv2-triforce %{_description}

%files       -n lv2-triforce
%license LICENCE.txt
%license LICENSE.dependencies
%doc README.md
%{_libdir}/lv2/triforce.lv2/manifest.ttl
%{_libdir}/lv2/triforce.lv2/triforce.ttl
%{_libdir}/lv2/triforce.lv2/triforce.so

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build
%{cargo_license_summary}
%{cargo_license} > LICENSE.dependencies

%install
%make_install LIBDIR=%{_libdir}

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
