# generated by cabal-rpm-2.2.1 --subpackage
# https://docs.fedoraproject.org/en-US/packaging-guidelines/Haskell/

%global pkg_name stack
%global stack_ver 2.15.7
%global pkgver %{pkg_name}-%{stack_ver}
%{?haskell_setup}

%global aesonwarningparser aeson-warning-parser-0.1.1
%global casaclient casa-client-0.0.2
%global casatypes casa-types-0.0.2
%global companion companion-0.1.0
%global cryptonconduit crypton-conduit-0.2.3
%global filelock filelock-0.1.1.7
%global hifileparser hi-file-parser-0.1.6.0
%global hpack hpack-0.36.1
%global httpdownload http-download-0.2.1.0
%global mintty mintty-0.1.4
%global mustache mustache-2.4.2
%global neatinterpolation neat-interpolation-0.5.1.4
%global openbrowser open-browser-0.2.1.0
%global pantry pantry-0.9.3.2
%global projecttemplate project-template-0.2.1.0
%global rioorphans rio-orphans-0.1.2.0
%global staticbytes static-bytes-0.1.0

%global subpkgs %{aesonwarningparser} %{casatypes} %{casaclient} %{companion} %{cryptonconduit} %{filelock} %{hifileparser} %{hpack} %{httpdownload} %{mintty} %{mustache} %{neatinterpolation} %{openbrowser} %{projecttemplate} %{rioorphans} %{staticbytes} %{pantry}

# testsuite missing deps: raw-strings-qq

Name:           haskell-platform
Version:        2024.1
Release:        33%{?dist}
Summary:        Standard Haskell distribution

License:        BSD-3-Clause
URL:            https://www.haskell.org/
# for stack:
# Begin cabal-rpm sources:
Source0:        https://hackage.haskell.org/package/%{pkgver}/%{pkgver}.tar.gz
Source1:        https://hackage.haskell.org/package/%{aesonwarningparser}/%{aesonwarningparser}.tar.gz
Source2:        https://hackage.haskell.org/package/%{casaclient}/%{casaclient}.tar.gz
Source3:        https://hackage.haskell.org/package/%{casatypes}/%{casatypes}.tar.gz
Source4:        https://hackage.haskell.org/package/%{companion}/%{companion}.tar.gz
Source5:        https://hackage.haskell.org/package/%{cryptonconduit}/%{cryptonconduit}.tar.gz
Source6:        https://hackage.haskell.org/package/%{filelock}/%{filelock}.tar.gz
Source7:        https://hackage.haskell.org/package/%{hifileparser}/%{hifileparser}.tar.gz
Source8:        https://hackage.haskell.org/package/%{hpack}/%{hpack}.tar.gz
Source9:        https://hackage.haskell.org/package/%{httpdownload}/%{httpdownload}.tar.gz
Source10:       https://hackage.haskell.org/package/%{mintty}/%{mintty}.tar.gz
Source11:       https://hackage.haskell.org/package/%{mustache}/%{mustache}.tar.gz
Source12:       https://hackage.haskell.org/package/%{neatinterpolation}/%{neatinterpolation}.tar.gz
Source13:       https://hackage.haskell.org/package/%{openbrowser}/%{openbrowser}.tar.gz
Source14:       https://hackage.haskell.org/package/%{pantry}/%{pantry}.tar.gz
Source15:       https://hackage.haskell.org/package/%{projecttemplate}/%{projecttemplate}.tar.gz
Source16:       https://hackage.haskell.org/package/%{rioorphans}/%{rioorphans}.tar.gz
Source17:       https://hackage.haskell.org/package/%{staticbytes}/%{staticbytes}.tar.gz
# End cabal-rpm sources
Source20:       stack-symlink-distro-ghc

# disable warning about ghc/Cabal version and nix in path
Patch1:         stack-disabled-global-warnings.patch
# https://github.com/commercialhaskell/stack/issues/6379
Patch2:         stack-Setup-Platforms.patch

BuildRequires:  ghc
BuildRequires:  alex
BuildRequires:  cabal-install
BuildRequires:  happy
BuildRequires:  hscolour

# Begin cabal-rpm deps:
BuildRequires:  ghc-rpm-macros-extra
BuildRequires:  ghc-Cabal-devel
BuildRequires:  ghc-aeson-devel
#BuildRequires:  ghc-aeson-warning-parser-devel
BuildRequires:  ghc-ansi-terminal-devel
BuildRequires:  ghc-array-devel
BuildRequires:  ghc-async-devel
BuildRequires:  ghc-attoparsec-devel
BuildRequires:  ghc-base-devel
BuildRequires:  ghc-base64-bytestring-devel
BuildRequires:  ghc-bytestring-devel
#BuildRequires:  ghc-casa-client-devel
#BuildRequires:  ghc-companion-devel
BuildRequires:  ghc-conduit-devel
BuildRequires:  ghc-conduit-extra-devel
BuildRequires:  ghc-containers-devel
BuildRequires:  ghc-crypton-devel
BuildRequires:  ghc-directory-devel
BuildRequires:  ghc-echo-devel
BuildRequires:  ghc-exceptions-devel
BuildRequires:  ghc-extra-devel
BuildRequires:  ghc-file-embed-devel
#BuildRequires:  ghc-filelock-devel
BuildRequires:  ghc-filepath-devel
BuildRequires:  ghc-fsnotify-devel
BuildRequires:  ghc-generic-deriving-devel
BuildRequires:  ghc-ghc-boot-devel
BuildRequires:  ghc-githash-devel
#BuildRequires:  ghc-hi-file-parser-devel
#BuildRequires:  ghc-hpack-devel
BuildRequires:  ghc-hpc-devel
BuildRequires:  ghc-http-client-devel
BuildRequires:  ghc-http-client-tls-devel
BuildRequires:  ghc-http-conduit-devel
#BuildRequires:  ghc-http-download-devel
BuildRequires:  ghc-http-types-devel
BuildRequires:  ghc-memory-devel
BuildRequires:  ghc-microlens-devel
BuildRequires:  ghc-mtl-devel
#BuildRequires:  ghc-mustache-devel
#BuildRequires:  ghc-neat-interpolation-devel
#BuildRequires:  ghc-open-browser-devel
BuildRequires:  ghc-optparse-applicative-devel
BuildRequires:  ghc-optparse-simple-devel
#BuildRequires:  ghc-pantry-devel
BuildRequires:  ghc-path-devel
BuildRequires:  ghc-path-io-devel
BuildRequires:  ghc-persistent-devel
BuildRequires:  ghc-persistent-sqlite-devel
BuildRequires:  ghc-pretty-devel
BuildRequires:  ghc-process-devel
#BuildRequires:  ghc-project-template-devel
BuildRequires:  ghc-random-devel
BuildRequires:  ghc-rio-devel
BuildRequires:  ghc-rio-prettyprint-devel
BuildRequires:  ghc-split-devel
BuildRequires:  ghc-stm-devel
BuildRequires:  ghc-tar-devel
BuildRequires:  ghc-template-haskell-devel
BuildRequires:  ghc-text-devel
BuildRequires:  ghc-time-devel
BuildRequires:  ghc-transformers-devel
BuildRequires:  ghc-unix-devel
BuildRequires:  ghc-unix-compat-devel
BuildRequires:  ghc-unordered-containers-devel
BuildRequires:  ghc-vector-devel
BuildRequires:  ghc-yaml-devel
BuildRequires:  ghc-zlib-devel
%if %{with ghc_prof}
BuildRequires:  ghc-Cabal-prof
BuildRequires:  ghc-aeson-prof
#BuildRequires:  ghc-aeson-warning-parser-prof
BuildRequires:  ghc-ansi-terminal-prof
BuildRequires:  ghc-array-prof
BuildRequires:  ghc-async-prof
BuildRequires:  ghc-attoparsec-prof
BuildRequires:  ghc-base-prof
BuildRequires:  ghc-base64-bytestring-prof
BuildRequires:  ghc-bytestring-prof
#BuildRequires:  ghc-casa-client-prof
#BuildRequires:  ghc-companion-prof
BuildRequires:  ghc-conduit-prof
BuildRequires:  ghc-conduit-extra-prof
BuildRequires:  ghc-containers-prof
BuildRequires:  ghc-crypton-prof
BuildRequires:  ghc-directory-prof
BuildRequires:  ghc-echo-prof
BuildRequires:  ghc-exceptions-prof
BuildRequires:  ghc-extra-prof
BuildRequires:  ghc-file-embed-prof
#BuildRequires:  ghc-filelock-prof
BuildRequires:  ghc-filepath-prof
BuildRequires:  ghc-fsnotify-prof
BuildRequires:  ghc-generic-deriving-prof
BuildRequires:  ghc-ghc-boot-prof
BuildRequires:  ghc-githash-prof
#BuildRequires:  ghc-hi-file-parser-prof
#BuildRequires:  ghc-hpack-prof
BuildRequires:  ghc-hpc-prof
BuildRequires:  ghc-http-client-prof
BuildRequires:  ghc-http-client-tls-prof
BuildRequires:  ghc-http-conduit-prof
#BuildRequires:  ghc-http-download-prof
BuildRequires:  ghc-http-types-prof
BuildRequires:  ghc-memory-prof
BuildRequires:  ghc-microlens-prof
BuildRequires:  ghc-mtl-prof
#BuildRequires:  ghc-mustache-prof
#BuildRequires:  ghc-neat-interpolation-prof
#BuildRequires:  ghc-open-browser-prof
BuildRequires:  ghc-optparse-applicative-prof
BuildRequires:  ghc-optparse-simple-prof
#BuildRequires:  ghc-pantry-prof
BuildRequires:  ghc-path-prof
BuildRequires:  ghc-path-io-prof
BuildRequires:  ghc-persistent-prof
BuildRequires:  ghc-persistent-sqlite-prof
BuildRequires:  ghc-pretty-prof
BuildRequires:  ghc-process-prof
#BuildRequires:  ghc-project-template-prof
BuildRequires:  ghc-random-prof
BuildRequires:  ghc-rio-prof
BuildRequires:  ghc-rio-prettyprint-prof
BuildRequires:  ghc-split-prof
BuildRequires:  ghc-stm-prof
BuildRequires:  ghc-tar-prof
BuildRequires:  ghc-template-haskell-prof
BuildRequires:  ghc-text-prof
BuildRequires:  ghc-time-prof
BuildRequires:  ghc-transformers-prof
BuildRequires:  ghc-unix-prof
BuildRequires:  ghc-unix-compat-prof
BuildRequires:  ghc-unordered-containers-prof
BuildRequires:  ghc-vector-prof
BuildRequires:  ghc-yaml-prof
BuildRequires:  ghc-zlib-prof
%endif
BuildRequires:  help2man
# for missing dep 'casa-client':
BuildRequires:  ghc-base16-bytestring-devel
BuildRequires:  ghc-network-uri-devel
BuildRequires:  ghc-resourcet-devel
BuildRequires:  ghc-th-lift-devel
BuildRequires:  ghc-unliftio-core-devel
%if %{with ghc_prof}
BuildRequires:  ghc-base16-bytestring-prof
BuildRequires:  ghc-network-uri-prof
BuildRequires:  ghc-resourcet-prof
BuildRequires:  ghc-th-lift-prof
BuildRequires:  ghc-unliftio-core-prof
%endif
# for missing dep 'casa-types':
BuildRequires:  ghc-base16-bytestring-devel
BuildRequires:  ghc-hashable-devel
BuildRequires:  ghc-path-pieces-devel
%if %{with ghc_prof}
BuildRequires:  ghc-base16-bytestring-prof
BuildRequires:  ghc-hashable-prof
BuildRequires:  ghc-path-pieces-prof
%endif
# for missing dep 'crypton-conduit':
BuildRequires:  ghc-resourcet-devel
%if %{with ghc_prof}
BuildRequires:  ghc-resourcet-prof
%endif
# for missing dep 'hi-file-parser':
BuildRequires:  ghc-binary-devel
%if %{with ghc_prof}
BuildRequires:  ghc-binary-prof
%endif
# for missing dep 'hpack':
BuildRequires:  ghc-Glob-devel
BuildRequires:  ghc-bifunctors-devel
BuildRequires:  ghc-deepseq-devel
BuildRequires:  ghc-infer-license-devel
BuildRequires:  ghc-scientific-devel
%if %{with ghc_prof}
BuildRequires:  ghc-Glob-prof
BuildRequires:  ghc-bifunctors-prof
BuildRequires:  ghc-deepseq-prof
BuildRequires:  ghc-infer-license-prof
BuildRequires:  ghc-scientific-prof
%endif
# for missing dep 'http-download':
BuildRequires:  ghc-retry-devel
%if %{with ghc_prof}
BuildRequires:  ghc-retry-prof
%endif
# for missing dep 'mustache':
BuildRequires:  ghc-cmdargs-devel
BuildRequires:  ghc-parsec-devel
BuildRequires:  ghc-scientific-devel
BuildRequires:  ghc-th-lift-devel
%if %{with ghc_prof}
BuildRequires:  ghc-cmdargs-prof
BuildRequires:  ghc-parsec-prof
BuildRequires:  ghc-scientific-prof
BuildRequires:  ghc-th-lift-prof
%endif
# for missing dep 'neat-interpolation':
BuildRequires:  ghc-megaparsec-devel
%if %{with ghc_prof}
BuildRequires:  ghc-megaparsec-prof
%endif
# for missing dep 'pantry':
BuildRequires:  ghc-digest-devel
BuildRequires:  ghc-hackage-security-devel
BuildRequires:  ghc-network-uri-devel
BuildRequires:  ghc-persistent-template-devel
BuildRequires:  ghc-primitive-devel
BuildRequires:  ghc-resourcet-devel
BuildRequires:  ghc-tar-conduit-devel
BuildRequires:  ghc-text-metrics-devel
BuildRequires:  ghc-unliftio-devel
BuildRequires:  ghc-zip-archive-devel
%if %{with ghc_prof}
BuildRequires:  ghc-digest-prof
BuildRequires:  ghc-hackage-security-prof
BuildRequires:  ghc-network-uri-prof
# no persistent-template prof!
#BuildRequires:  ghc-persistent-template-prof
BuildRequires:  ghc-primitive-prof
BuildRequires:  ghc-resourcet-prof
BuildRequires:  ghc-tar-conduit-prof
BuildRequires:  ghc-text-metrics-prof
BuildRequires:  ghc-unliftio-prof
BuildRequires:  ghc-zip-archive-prof
%endif
# for missing dep 'project-template':
BuildRequires:  ghc-resourcet-devel
%if %{with ghc_prof}
BuildRequires:  ghc-resourcet-prof
%endif
# for missing dep 'rio-orphans':
BuildRequires:  ghc-fast-logger-devel
BuildRequires:  ghc-monad-control-devel
BuildRequires:  ghc-monad-logger-devel
BuildRequires:  ghc-resourcet-devel
BuildRequires:  ghc-transformers-base-devel
BuildRequires:  ghc-unliftio-core-devel
%if %{with ghc_prof}
BuildRequires:  ghc-fast-logger-prof
BuildRequires:  ghc-monad-control-prof
BuildRequires:  ghc-monad-logger-prof
BuildRequires:  ghc-resourcet-prof
BuildRequires:  ghc-transformers-base-prof
BuildRequires:  ghc-unliftio-core-prof
%endif
# for missing dep 'static-bytes':
BuildRequires:  ghc-primitive-devel
%if %{with ghc_prof}
BuildRequires:  ghc-primitive-prof
%endif
# End cabal-rpm deps

# pull in all of ghc for least surprise
# even though strictly libHSghc is not formally part of HP
Requires:       ghc
Requires:       alex
Requires:       cabal-install
Requires:       happy
Requires:       hscolour
Requires:       stack

%description
Haskell Platform is a set of stable and well used Haskell tools.
It provides a good starting environment for Haskell development.


%package -n stack
Version:        %{stack_ver}
Summary:        Haskell package tool
Url:            https://docs.haskellstack.org/en/stable/
Requires:       gcc
Requires:       gmp-devel
Recommends:     zlib-devel

%description -n stack
Stack is a cross-platform program for developing Haskell projects.


%package -n ghc-stack
Version:        %{stack_ver}
Summary:        Haskell stack library

%description -n ghc-stack
This package provides the Haskell stack shared library.


%package -n ghc-stack-devel
Version:        %{stack_ver}
Summary:        Haskell stack library development files
Provides:       ghc-stack-static = %{version}-%{release}
Provides:       ghc-stack-static%{?_isa} = %{version}-%{release}
%if %{defined ghc_version}
Requires:       ghc-compiler = %{ghc_version}
%endif
Requires:       ghc-stack%{?_isa} = %{version}-%{release}

%description -n ghc-stack-devel
This package provides the Haskell stack library development files.


%if %{with haddock}
%package -n ghc-stack-doc
Version:        %{stack_ver}
Summary:        Haskell stack library documentation
BuildArch:      noarch
Requires:       ghc-filesystem

%description -n ghc-stack-doc
This package provides the Haskell stack library documentation.
%endif


%if %{with ghc_prof}
%package -n ghc-stack-prof
Version:        %{stack_ver}
Summary:        Haskell stack profiling library
Requires:       ghc-stack-devel%{?_isa} = %{version}-%{release}
Supplements:    (ghc-stack-devel and ghc-prof)

%description -n ghc-stack-prof
This package provides the Haskell stack profiling library.
%endif


%global main_version %{version}

%if %{defined ghclibdir}
%ghc_lib_subpackage -l BSD-3-Clause %{aesonwarningparser}
%ghc_lib_subpackage -l BSD-3-Clause %{casaclient}
%ghc_lib_subpackage -l BSD-3-Clause %{casatypes}
%ghc_lib_subpackage -l BSD-3-Clause %{companion}
%ghc_lib_subpackage -l BSD-3-Clause %{cryptonconduit}
%ghc_lib_subpackage -l CC0-1.0 %{filelock}
%ghc_lib_subpackage -l BSD-3-Clause %{hifileparser}
%ghc_lib_subpackage -l MIT %{hpack}
%ghc_lib_subpackage -l BSD-3-Clause %{httpdownload}
%ghc_lib_subpackage -l BSD-3-Clause %{mintty}
%ghc_lib_subpackage -l BSD-3-Clause %{mustache}
%ghc_lib_subpackage -l MIT %{neatinterpolation}
%ghc_lib_subpackage -l BSD-3-Clause %{openbrowser}
%ghc_lib_subpackage -l BSD-3-Clause %{pantry}
%ghc_lib_subpackage -l BSD-3-Clause %{projecttemplate}
%ghc_lib_subpackage -l MIT %{rioorphans}
%ghc_lib_subpackage -l BSD-3-Clause %{staticbytes}
%endif

%global version %{main_version}


%prep
# Begin cabal-rpm setup:
%setup -q -n %{pkgver} -a1 -a2 -a3 -a4 -a5 -a6 -a7 -a8 -a9 -a10 -a11 -a12 -a13 -a14 -a15 -a16 -a17
# End cabal-rpm setup
%autopatch -p1


%build
# Begin cabal-rpm build:
%ghc_libs_build %{subpkgs}
%ghc_lib_build
# End cabal-rpm build


%install
# Begin cabal-rpm install
%ghc_libs_install %{subpkgs}
%ghc_lib_install

set noclobber
mkdir -p %{buildroot}%{bash_completions_dir}
%{buildroot}%{_bindir}/stack --bash-completion-script stack | sed s/filenames/default/ > %{buildroot}%{bash_completions_dir}/stack

mkdir -p %{buildroot}%{_mandir}/man1/
help2man --no-info %{buildroot}%{_bindir}/stack > %{buildroot}%{_mandir}/man1/stack.1
# End cabal-rpm install

# open-browser
rm %{buildroot}%{_bindir}/example
echo %{_bindir}/hpack >> %{hpack}/ghc-hpack.files
echo %{_bindir}/haskell-mustache >> %{mustache}/ghc-mustache.files

install -p %{SOURCE20} %{buildroot}%{_bindir}/stack-symlink-distro-ghc

rm %{buildroot}%{_licensedir}/%{name}/LICENSE



%files


%files -n stack
# Begin cabal-rpm files:
%license LICENSE
%doc CONTRIBUTING.md ChangeLog.md README.md
%{_bindir}/stack
%{bash_completions_dir}/stack
%{_mandir}/man1/stack.1*
# End cabal-rpm files
%{_bindir}/stack-symlink-distro-ghc


%files -n ghc-stack -f ghc-stack.files
# Begin cabal-rpm files:
%license LICENSE
# End cabal-rpm files


%files -n ghc-stack-devel -f ghc-stack-devel.files
%doc CONTRIBUTING.md ChangeLog.md README.md


%if %{with haddock}
%files -n ghc-stack-doc -f ghc-stack-doc.files
%license LICENSE
%endif


%if %{with ghc_prof}
%files -n ghc-stack-prof -f ghc-stack-prof.files
%endif


%changelog
* Thu Aug  1 2024 Jens Petersen <petersen@redhat.com> - 2024.1-33
- https://hackage.haskell.org/package/stack-2.15.7/changelog

* Thu Jul 18 2024 Fedora Release Engineering <releng@fedoraproject.org> - 2023.1-32
- Rebuilt for https://fedoraproject.org/wiki/Fedora_41_Mass_Rebuild

* Mon Jul  8 2024 Jens Petersen <petersen@redhat.com> - 2023.1-31
- update to new stackage snapshots.json url

* Thu Mar  7 2024 Jens Petersen <petersen@redhat.com> - 2023.1-30
- stack-symlink-distro-ghc: workaround for ppc64le and no longer error
  for existing dir

* Wed Jan 24 2024 Fedora Release Engineering <releng@fedoraproject.org> - 2023.1-29
- Rebuilt for https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild

* Sat Jan 20 2024 Fedora Release Engineering <releng@fedoraproject.org> - 2023.1-28
- Rebuilt for https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild

* Fri Dec 15 2023 Jens Petersen <petersen@redhat.com> - 2023.1-27
- patch Stack.Setup to accept PPC64 and S390X Linux platforms

* Tue Nov  7 2023 Jens Petersen <petersen@redhat.com> - 2023.1-26
- make stack-symlink-distro-ghc executable

* Tue Aug  8 2023 Jens Petersen <petersen@redhat.com> - 2023.1-25
- bring back the stack InvalidAbsFile patch updated for 2.9.3
  https://github.com/commercialhaskell/stack/pull/6028
- disable warnings about untested ghc and Cabal versions

* Sat Jul 29 2023 Jens Petersen <petersen@redhat.com> - 2023.1-24
- stack-2.9.3.1
- https://hackage.haskell.org/package/stack-2.9.3.1/changelog

* Thu Jul 20 2023 Fedora Release Engineering <releng@fedoraproject.org> - 2022.2-23
- Rebuilt for https://fedoraproject.org/wiki/Fedora_39_Mass_Rebuild

* Tue Apr 11 2023 Jens Petersen <petersen@redhat.com> - 2022.2-22
- backport fix for error: InvalidAbsFile "/usr/lib64/ghc-9.2.3/lib/../lib/x86_64-linux-ghc-9.2.3/rts-1.0.2/include/ghcversion.h" (#5866)

* Tue Feb 21 2023 Jens Petersen <petersen@redhat.com> - 2022.2-21
- update to stack 2.9.1
- https://hackage.haskell.org/package/stack-2.9.1/changelog
- SPDX migration

* Thu Jul 21 2022 Fedora Release Engineering <releng@fedoraproject.org> - 2022.1-20
- Rebuilt for https://fedoraproject.org/wiki/Fedora_37_Mass_Rebuild

* Mon Jun 20 2022 Jens Petersen <petersen@redhat.com> - 2022.1-19
- rebuild

* Sat Apr 30 2022 Jens Petersen <petersen@redhat.com> - 2022.1-18
- stack-symlink-distro-ghc script for setting up stack to use ghcX.Y

* Mon Mar 21 2022 Jens Petersen <petersen@redhat.com> - 2022.1-17
- silence the warnings about ghc-9.2 and Cabal-3.6

* Sun Mar 20 2022 Jens Petersen <petersen@redhat.com> - 2022.1-16
- https://hackage.haskell.org/package/stack-2.7.5/changelog
- drop regex-applicative-text library

* Thu Jan 20 2022 Fedora Release Engineering <releng@fedoraproject.org> - 2021.1-15
- Rebuilt for https://fedoraproject.org/wiki/Fedora_36_Mass_Rebuild

* Sat Jan 08 2022 Miro Hronƒçok <mhroncok@redhat.com> - 2021.1-14
- Rebuilt for https://fedoraproject.org/wiki/Changes/LIBFFI34

* Tue Aug 10 2021 Jens Petersen <petersen@redhat.com> - 2021.1-13
- stack-2.7.3
- https://github.com/commercialhaskell/stack/releases/tag/v2.7.3

* Thu Jul 22 2021 Fedora Release Engineering <releng@fedoraproject.org> - 2020.2-12
- Rebuilt for https://fedoraproject.org/wiki/Fedora_35_Mass_Rebuild

* Tue Jun  8 2021 Jens Petersen <petersen@redhat.com> - 2020.2-11
- use ghc_delete_rpaths

* Thu Mar 18 2021 Jens Petersen <petersen@redhat.com> - 2020.2-10
- retry was packaged in Fedora

* Tue Jan 26 2021 Fedora Release Engineering <releng@fedoraproject.org> - 2020.2-9
- Rebuilt for https://fedoraproject.org/wiki/Fedora_34_Mass_Rebuild

* Sun Jan 24 2021 Jens Petersen <petersen@redhat.com> - 2020.2-8
- infer-license was packaged

* Sun Jan 17 2021 Jens Petersen <petersen@redhat.com> - 2020.2-7
- th-utilities is not longer needed for pantry/store

* Fri Sep 18 2020 Jens Petersen <petersen@redhat.com>
- stack: use recommends for zlib-devel

* Wed Sep 16 2020 Jens Petersen <petersen@redhat.com> - 2020.2-6
- stack requires gmp-devel and gcc
  https://github.com/commercialhaskell/stack/issues/5388

* Tue Aug 11 2020 Jens Petersen <petersen@redhat.com> - 2020.2-5
- stack-2.3.3
- https://github.com/commercialhaskell/stack/releases/tag/v2.3.3

* Tue Jul 28 2020 Fedora Release Engineering <releng@fedoraproject.org> - 2020.2-4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_33_Mass_Rebuild

* Thu Jun 25 2020 Jens Petersen <petersen@redhat.com> - 2020.2-3
- update stack to 2.3.1

* Sat May  2 2020 Jens Petersen <petersen@redhat.com>
- generate bash completions

* Sun Apr 12 2020 Jens Petersen <petersen@redhat.com> - 2020.1-2
- stack requires ghc-zlib-devel for ghc
- stack: silence warnings about ghc-8.8 and Cabal-3.0

* Wed Apr  8 2020 Jens Petersen <petersen@redhat.com> - 2020.1-1
- subpackage stack package tool

* Wed Jan 29 2020 Fedora Release Engineering <releng@fedoraproject.org> - 2019.1-4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_32_Mass_Rebuild

* Thu Jul 25 2019 Fedora Release Engineering <releng@fedoraproject.org> - 2019.1-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_31_Mass_Rebuild

* Thu May  9 2019 Jens Petersen <petersen@redhat.com> - 2019.1-2
- move obsoletes to ghc-obsoletes to not pull in this heavy package

* Wed May  8 2019 Jens Petersen <petersen@redhat.com> - 2019.1-1
- haskell-platform is now just a meta-package
- obsolete previous subpackaged Haskell Platform libraries
- package is now noarch

* Fri Feb 01 2019 Fedora Release Engineering <releng@fedoraproject.org> - 2018.8.2.2-15
- Rebuilt for https://fedoraproject.org/wiki/Fedora_30_Mass_Rebuild

* Sat Jul 28 2018 Jens Petersen <petersen@redhat.com> - 2018.8.2.2-14
- refresh to lts-11

* Fri Jul 13 2018 Fedora Release Engineering <releng@fedoraproject.org> - 2017.8.2.2-13
- Rebuilt for https://fedoraproject.org/wiki/Fedora_29_Mass_Rebuild

* Thu Feb 15 2018 Jens Petersen <petersen@redhat.com> - 2017.8.2.2-12
- remove _isa from buildrequires (#1545187)

* Wed Feb 07 2018 Fedora Release Engineering <releng@fedoraproject.org> - 2017.8.2.2-11
- Rebuilt for https://fedoraproject.org/wiki/Fedora_28_Mass_Rebuild

* Mon Feb  5 2018 Jens Petersen <petersen@redhat.com> - 2017.8.2.2-10
- update to upstream 8.2.2 release

* Fri Jan 26 2018 Jens Petersen <petersen@redhat.com> - 2017.8.0.2-9
- rebuild

* Wed Aug 02 2017 Fedora Release Engineering <releng@fedoraproject.org> - 2017.8.0.2-8
- Rebuilt for https://fedoraproject.org/wiki/Fedora_27_Binutils_Mass_Rebuild

* Wed Jul 26 2017 Fedora Release Engineering <releng@fedoraproject.org> - 2017.8.0.2-7
- Rebuilt for https://fedoraproject.org/wiki/Fedora_27_Mass_Rebuild

* Mon Mar 13 2017 Jens Petersen <petersen@redhat.com> - 2017.8.0.2-6
- enable prof libraries

* Fri Mar 10 2017 Jens Petersen <petersen@redhat.com> - 2017.8.0.2-5
- update to 8.0.2
- 'cgi' and 'multipart' dropped, add 'fixed'
- core haskell-platform now just provides tools
- drop ghc-haskell-platform-devel subpackage

* Fri Feb 10 2017 Jens Petersen <petersen@redhat.com> - 2016.7.10.3-4
- subpackage build like for other packages

* Wed Sep 28 2016 Jens Petersen <petersen@redhat.com> - 2016.7.10.3-3
- rebuild

* Fri Jul 29 2016 Jens Petersen <petersen@redhat.com> - 2016.7.10.3-2
- split-0.2.3.1
- use new ghc_libs_build and ghc_libs_install macros
- disable GL packages for armv7hl (#1372527)

* Thu Jun 23 2016 Jens Petersen <petersen@redhat.com> - 2016.7.10.3-1
- update to new haskell-platform version 7.10.3
- new half multipart ObjectName StateVar subpackages
- haskell98 dropped and cgi is back
- old-locale and old-time packages added
- bump version to 2016 for version bumps and to avoid epoch
- alex-3.1.7, async-2.1.0, attoparsec-0.13.0.2, cabal-install-1.22.9.0,
  HUnit-1.3.1.1, network-uri 2.6.1.0, parallel-3.2.1.0, parsec-3.1.11,
  QuickCheck-2.8.2, scientific-0.3.4.7, split-0.2.3, text-1.2.2.1, zlib-0.6.1.1

* Wed Feb 03 2016 Fedora Release Engineering <releng@fedoraproject.org> - 2014.2.0.0.2-6
- Rebuilt for https://fedoraproject.org/wiki/Fedora_24_Mass_Rebuild

* Wed Jun 17 2015 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 2014.2.0.0.2-5
- Rebuilt for https://fedoraproject.org/wiki/Fedora_23_Mass_Rebuild

* Wed May 13 2015 Jens Petersen <petersen@redhat.com> - 2014.2.0.0.3-4
- bump cabal-install to 1.18.1.0 and allow newer versions

* Fri Apr 10 2015 Jens Petersen <petersen@redhat.com> - 2014.2.0.0.2-3
- workaround build-tools version detection failures on aarch64 (#1210323)

* Fri Apr  3 2015 Jens Petersen <petersen@redhat.com> - 2014.2.0.0.2-2
- bump alex to 3.1.4
- bump cabal-install to 1.18.0.8
- bump happy to 1.19.5
- bump QuickCheck to 2.7.6

* Fri Feb  6 2015 Jens Petersen <petersen@redhat.com> - 2014.2.0.0.1-1
- use ghc-7.8.4
- bump attoparsec to 0.11.3.4
- bump text to 1.1.1.3

* Wed Aug 20 2014 Jens Petersen <petersen@redhat.com> - 2014.2.0.0-1
- update to haskell-platform-2014.2
- ghc-7.8.3+ ships xhtml
- cgi dropped
- requires hscolour

* Tue Jul  8 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-37
- rebuild for F21

* Mon Apr 21 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-36
- fix build for versioned docdirs

* Mon Apr 21 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-35
- alex and syb are separate packages again

* Mon Apr 14 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-34
- cabal-install, happy, parallel, regex-compat are now separate packages

* Thu Mar 27 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-33
- transformers lib is now separate package

* Wed Mar 26 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-32
- QuickCheck and HTTP are separate packages again

* Mon Mar 17 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-31
- HUnit is a separate package again
- network is a separate package again

* Thu Feb  6 2014 Jens Petersen <petersen@redhat.com>
- only show cabal-install upgrade notice for verbose

* Mon Feb  3 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-30
- parsec is now a separate package again
- async is now a new separate package

* Wed Jan  8 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-29
- regex-posix is now a separate package

* Fri Jan  3 2014 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-28
- html and regex-base are now separate packages

* Wed Dec  4 2013 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-27
- mtl and zlib are now separate packages again

* Thu Oct 31 2013 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-26
- fix alex patching for ppc and s390 archs

* Sat Oct 26 2013 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-25
- random and stm are separate packages again

* Fri Jul 26 2013 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-24
- fix packaging of license files when building without shared libraries
- tweaks for F20 unversioned docdir

* Sat May  4 2013 Jens Petersen <petersen@redhat.com> - 2013.2.0.0-23
- update to 2013.2.0.0
- new packages: GLURaw, OpenGLRaw
- new depends: attoparsec, case-insensitive, hashable, unordered-containers
- use ghc_fix_dynamic_rpath
- text lib is separate package again

* Thu Feb 14 2013 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 2012.4.0.0-22
- Rebuilt for https://fedoraproject.org/wiki/Fedora_19_Mass_Rebuild

* Thu Dec  6 2012 Jens Petersen <petersen@redhat.com> - 2012.4.0.0-21
- vector was patched to build on all archs (#883479)

* Wed Dec  5 2012 Jens Petersen <petersen@redhat.com> - 2012.4.0.0-20
- keep split, vector, and primitive in their own existing src packages
- allow building on ghc archs without ghci: ie without vector library (#883479)

* Sat Oct 20 2012 Jens Petersen <petersen@redhat.com> - 2012.4.0.0-19
- update to 2012.4.0.0
- new subpackages: async, split, vector, and primitive (vector dep)
- drop explicit BR hscolour

* Mon Jul 23 2012 Jens Petersen <petersen@redhat.com> - 2012.2.0.0-18
- also apply the alex fix-bang-pattern patch for s390 and s390x

* Thu Jul 19 2012 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 2012.2.0.0-17
- Rebuilt for https://fedoraproject.org/wiki/Fedora_18_Mass_Rebuild

* Mon Jul 16 2012 Jens Petersen <petersen@redhat.com> - 2012.2.0.0-16
- change prof BRs to devel

* Thu Jun  7 2012 Jens Petersen <petersen@redhat.com> - 2012.2.0.0-15
- update to 2012.2.0.0
- build the whole of haskell-platform now from this package
  and subpackage like ghc's libraries
- add alex fix-bang-pattern.diff patch from Debian to fix build on ppc archs
  - requires BR alex
- drop common_summary and common_description for subpackaging
- no longer need to unset debug_package
- make sure all the dynamically linked files get stripped
- needs ghc-rpm-macros 0.95.2 or later to build
- use chrpath to fix the program RPATHs when dynamically linked to HP libs

* Wed May  9 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.741-2
- update cabal-install to 0.14.0

* Sat Mar 24 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.741-1
- update to ghc-7.4.1 and latest libraries
- temporarily just a meta-package

* Wed Mar 21 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.0-7
- require ghc-compiler instead of ghc to avoid the ghc lib

* Fri Jan 20 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.0-6
- update to cabal2spec-0.25.2

* Thu Jan 19 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.0-5
- update the description

* Thu Jan 19 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.0-4
- update the source url

* Fri Jan 13 2012 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 2011.4.0.0-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_17_Mass_Rebuild

* Sun Jan  1 2012 Jens Petersen <petersen@redhat.com> - 2011.4.0.0-2
- define ghc_without_shared since ghc-haskell-platform-devel no longer
  requires ghc-haskell-platform

* Wed Dec 28 2011 Jens Petersen <petersen@redhat.com> - 2011.4.0.0-1
- update to 2011.4.0.0
- reenable ppc64
- drop ghc-haskell-platform subpackage
- require ghc-libraries instead of ghc-devel

* Tue Jun 21 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.1-2
- ghc_arches replaces ghc_excluded_archs (cabal2spec-0.23.2)

* Mon Jun 20 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.1-1
- update to 2011.2.0.1: ghc-7.0.3 and text-0.11.0.6
- update source url
- use ghc_excluded_archs
- exclude ppc64: no QuickCheck
- bump ghc to 7.0.4
- use top_prefix for path to haskell-platform subdir in large tarball
- drop upstream_version

* Fri May 27 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.0-5
- drop the prof subpackage

* Wed May 25 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.0-4
- add ppc64 arch

* Mon Mar 28 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.0-3
- remove duplicate license file from ghc-haskell-platform

* Mon Mar 28 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.0-2
- fix the install scripts:
- ghc_reindex_haddock is now redundant
- use ghc_pkg_recache

* Fri Mar 11 2011 Jens Petersen <petersen@redhat.com> - 2011.2.0.0-1
- 2011.2.0.0 final

* Thu Mar 10 2011 Fabio M. Di Nitto <fdinitto@redhat.com> - 2011.1.0.0-0.6
- Enable build on sparcv9

* Tue Feb 15 2011 Jens Petersen <petersen@redhat.com> - 2011.1.0.0-0.5
- update to latest haskell-platform-2011.1 snapshot

* Wed Feb 09 2011 Fedora Release Engineering <rel-eng@lists.fedoraproject.org> - 2011.1.0.0-0.4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_15_Mass_Rebuild

* Sat Jan 22 2011 Jens Petersen <petersen@redhat.com> - 2011.1.0.0-0.3
- make ghc-haskell-platform-devel require ghc-devel and ghc_devel_requires
- build with ghc_lib_build and without_haddock

* Tue Jan 18 2011 Jens Petersen <petersen@redhat.com> - 2011.1.0.0-0.2
- update to cabal2spec-0.22.4

* Sun Dec  5 2010 Jens Petersen <petersen@redhat.com> - 2011.1.0.0-0.1
- update to 2011.1.0.0 alpha snapshot

* Fri Nov 26 2010 Jens Petersen <petersen@redhat.com> - 2010.2.0.0.701-1
- bump some versions for ghc-7.0.1
- add hscolour
- no haddock documentation to build
- remove duplicate LICENSE file

* Fri Jul 23 2010 Jens Petersen <petersen@redhat.com> - 2010.2.0.0-1
- update to 2010.2.0.0 final release (no actual changes)

* Sun Jul 18 2010 Jens Petersen <petersen@redhat.com> - 2010.2.0.0-0.1
- drop debuginfo again: ghc_strip_dynlinked got fixed in ghc-rpm-macros-0.8.1

* Fri Jul 16 2010 Jens Petersen <petersen@redhat.com> - 2010.2.0.0-0.1
- update to 2010.2.0.0 RC
- obsolete ghc-haskell-platform-doc in line with ghc-rpm-macros-0.8.0
- add License to base library too

* Sun Jun 27 2010 Jens Petersen <petersen@redhat.com> - 2010.1.0.0.6123-1
- bump ghc to 6.12.3
- sync cabal2spec-0.22.1
- enable debugging for now to avoid empty strip error

* Thu Apr 29 2010 Jens Petersen <petersen@redhat.com> - 2010.1.0.0.6122-1
- break haskell-platform-2010.1.0.0 with ghc-6.12.2

* Wed Mar 24 2010 Jens Petersen <petersen@redhat.com> - 2010.1.0.0-1
- update to 2010.1.0.0 beta release
- update versions of alex, cgi, network, parallel, QuickCheck, HTTP
- new deepseq dep (#576482)

* Thu Jan 28 2010 Jens Petersen <petersen@redhat.com> - 2009.3.1.20100115-0.2
- add filelist for shared libs
- update devel post and postun

* Sat Jan 16 2010 Jens Petersen <petersen@redhat.com> - 2009.3.1.20100115-0.1
- update to darcs snapshot patched for ghc-6.12.1
- update to ghc-rpm-macros-0.5.1 and cabal2spec-0.21.1:
- drop doc and prof bcond
- use common_summary and common_description
- use ghc_lib_package and ghc_pkg_deps
- build shared library
- drop redundant buildroot and its install cleaning

* Mon Sep 28 2009 Jens Petersen <petersen@redhat.com> - 2009.2.0.2-3
- fix rpmlint warnings (bos, #523883)

* Mon Sep 28 2009 Jens Petersen <petersen@redhat.com> - 2009.2.0.2-2
- add all the buildrequires (#523883)
- create ghcpkgdir since metapackage
- nothing in bindir

* Thu Sep 17 2009 Jens Petersen <petersen@redhat.com> - 2009.2.0.2-1
- initial packaging for Fedora
