# Generated by go2rpm
%bcond check 1
%global debug_package %{nil}

# https://github.com/linuxdeepin/go-lib
%global goipath         github.com/linuxdeepin/go-lib
Version:                6.0.9
%global tag             %{version}

%gometa -L

%global common_description %{expand:
Deepin Golang library is a library containing many useful go routines for things
such as glib, gettext, archive, graphic,etc.}

%global golicenses      LICENSE
%global godocs          README.md

Name:           golang-deepin-go-lib
Release:        %{autorelease}
Summary:        Go bindings for Deepin Desktop Environment development

License:        GPL-3.0-or-later
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  dbus-x11
BuildRequires:  iso-codes
BuildRequires:  mobile-broadband-provider-info
BuildRequires:  pkgconfig(gio-2.0)
BuildRequires:  pkgconfig(gdk-3.0)
BuildRequires:  pkgconfig(gdk-x11-3.0)
BuildRequires:  pkgconfig(gdk-pixbuf-xlib-2.0)
BuildRequires:  pkgconfig(libpulse)
BuildRequires:  pkgconfig(alsa)
BuildRequires:  pam-devel

%if %{with check}
BuildRequires:  pkgconfig(libcanberra)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep -A
%autopatch -p1

%generate_buildrequires
%go_generate_buildrequires

%install
%gopkginstall

%if %{with check}
%check
%ifarch s390x
%gocheck -d procfs -d backlight/display -d gdkpixbuf -d gettext
%else
%gocheck -d procfs -d gdkpixbuf
%endif
%endif

%gopkgfiles

%changelog
%autochangelog
